/*******************************************************************************************************************************
@Author : Prasant Kumar Satpathy
@Name: GA_AP_SearchDocSTAR_Test
@CreatedDate: 25 - Jan 2018 
@Description: GA_AP_SearchDocSTAR_Test class is for GA_AP_SearchDocSTAR.
@version : 1.0  
********************************************************************************************************************************/
@isTest(seealldata = false)
private class GA_AP_SearchDocSTAR_Test {
    
    /*******************************************************************************************************************************
@Description        :   getdocFromdocstr() method 
@Name               :   getdocFromdocstr
@Param              :   None
@Return             :   void
@throws Exception   :   N/A;
********************************************************************************************************************************/ 
    private static testmethod void getdocFromdocstr()
    {
        string accRecType = 'Account - Prospect';
        Id accRecTpeId = Schema.SObjectType.Account.getRecordTypeInfosByName().get(accRecType).getRecordTypeId();
        user usr = GA_OBJ_TD01_TestDataCreation.UsrRec('TestJeoRl','testsalesrepmail@bcbsm.com','System Administrator');
        database.insert(usr);
        
        system.runAs(usr)
        {   
            
            Account acc = GA_OBJ_TD01_TestDataCreation.AccRec();
            acc.CID__c='419008';
            acc.recordtypeid=accRecTpeId;
            database.insert(acc);
            
            test.startTest();
            // string serchDocRespBody='{ "SearchDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2018-02-07T08:55:31.484-05:00", "MessageID":"DMGMTJSON1.0-d4b7449e-91c8-4c3f-9faf-9663ac4d9c79", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Document":[ { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B01B00356A10849" }, { "Name":"file_record_id", "Value":"0X000000000000E3A5" }, { "Name":"Customer_ID", "Value":"100070" }, { "Name":"Federal_Tax_ID", "Value":"382069753" }, { "Name":"WorkOrder", "Value":"1774418" }, { "Name":"FileRecordID", "Value":"0X000000000000E3A5" }, { "Name":"Scan_Date_Time", "Value":"1513716782039" }, { "Name":"CREATETS", "Value":"1517497436095" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B01B00356A10849" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B01B00356A10849" }, { "Name":"LASTCHANGEDUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1517497436095" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"MimeType", "Value":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" }, { "Name":"FileName", "Value":"/home/mpcmi/cm/1/A1001001A17L19B55302A11293.xlsx" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B01B00356B10851" }, { "Name":"file_record_id", "Value":"0X000000000000E3A6" }, { "Name":"Customer_ID", "Value":"100070" }, { "Name":"Federal_Tax_ID", "Value":"382069753" }, { "Name":"WorkOrder", "Value":"1774425" }, { "Name":"FileRecordID", "Value":"0X000000000000E3A6" }, { "Name":"Scan_Date_Time", "Value":"1513716782151" }, { "Name":"CREATETS", "Value":"1517497436186" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B01B00356B10851" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B01B00356B10851" }, { "Name":"LASTCHANGEDUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1517497436186" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"MimeType", "Value":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" }, { "Name":"FileName", "Value":"/home/mpcmi/cm/1/A1001001A17L19B55302B11295.xlsx" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B01B00738J15483" }, { "Name":"file_record_id", "Value":"0X01000000000002CC" }, { "Name":"Customer_ID", "Value":"100070" }, { "Name":"Federal_Tax_ID", "Value":"382069753" }, { "Name":"WorkOrder", "Value":"65536-298776" }, { "Name":"FileRecordID", "Value":"0X01000000000002CC" }, { "Name":"Scan_Date_Time", "Value":"1517259225678" }, { "Name":"CREATETS", "Value":"1517497659020" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B01B00738J15483" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B01B00738J15483" }, { "Name":"LASTCHANGEDUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1517497659020" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"MimeType", "Value":"application/pdf" }, { "Name":"FileName", "Value":"/home/mpcmi/cm/1/A1001001A18A29B55345H08122.pdf" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B01B00739A15485" }, { "Name":"file_record_id", "Value":"0X0100000000000301" }, { "Name":"Customer_ID", "Value":"100070" }, { "Name":"Federal_Tax_ID", "Value":"382069753" }, { "Name":"WorkOrder", "Value":"65536-298833" }, { "Name":"FileRecordID", "Value":"0X0100000000000301" }, { "Name":"Scan_Date_Time", "Value":"1517259226092" }, { "Name":"CREATETS", "Value":"1517497659137" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B01B00739A15485" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B01B00739A15485" }, { "Name":"LASTCHANGEDUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1517497659137" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"MimeType", "Value":"application/pdf" }, { "Name":"FileName", "Value":"/home/mpcmi/cm/1/A1001001A18A29B55346A08124.pdf" }, { "Name":"ItemType", "Value":"GroupCRM" } ] } ] } } }';
            //String jsonresponse  = '{ "SearchDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2019-02-21T12:41:27.773-05:00", "MessageID":"DMGMTJSON1.0-32077f6f-0d81-4f71-8c8c-882aed4fabf1", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful Completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Document":[ { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550F03652" }, { "Name":"file_record_id", "Value":"0X01000000000001E9" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001E9" }, { "Name":"Scan_Date_Time", "Value":"1518551750542" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001e9_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518551750603" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550F03652" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550F03652" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403590" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550G03654" }, { "Name":"file_record_id", "Value":"0X01000000000001EA" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EA" }, { "Name":"Scan_Date_Time", "Value":"1518551750637" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001ea_01-09-2018__workorderactivity.xlsx" }, { "Name":"CREATETS", "Value":"1518551750698" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550G03654" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550G03654" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403701" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550H03656" }, { "Name":"file_record_id", "Value":"0X01000000000001EB" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EB" }, { "Name":"Scan_Date_Time", "Value":"1518551750735" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001eb_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518551750795" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550H03656" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550H03656" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403803" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548C50690" }, { "Name":"file_record_id", "Value":"0X01000000000001E9" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001E9" }, { "Name":"Scan_Date_Time", "Value":"1518102947973" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001e9_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518102948313" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548C50690" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548C50690" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316447" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548D50692" }, { "Name":"file_record_id", "Value":"0X01000000000001EA" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EA" }, { "Name":"Scan_Date_Time", "Value":"1518102948150" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001ea_01-09-2018__workorderactivity.xlsx" }, { "Name":"CREATETS", "Value":"1518102948473" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548D50692" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548D50692" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316506" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548F50694" }, { "Name":"file_record_id", "Value":"0X01000000000001EB" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EB" }, { "Name":"Scan_Date_Time", "Value":"1518102948281" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001eb_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518102948594" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548F50694" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548F50694" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316564" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] } ] } } }'; 
            String jsonresponse = '{ "SearchDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2020-05-30T15:11:31.991-04:00", "MessageID":"DMGMTJSON1.0-e3faca8f-0ce3-4967-a0bd-7b00776bb776", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful Completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Document":[ { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00019H00516" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Mbr Apps" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:19 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"210 KB" }, { "Name":"OriginalFileName", "Value":"Ecos-TestTD-0033-8003K0000005OKNQA2-05052020-D-1411.docx" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00019H00516" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593292398" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687219934" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00019H00516" }, { "Name":"ACLCODE", "Value":"Mbr_Apps_ACL" }, { "Name":"ItemType", "Value":"Mbr_Apps" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00020E00525" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:20 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"346 KB" }, { "Name":"OriginalFileName", "Value":"CoverageAgreement-00005754.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00020E00525" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267405" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687220556" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00020E00525" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00020H00527" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:20 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"346 KB" }, { "Name":"OriginalFileName", "Value":"CoverageAgreement-00005754.pdf.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00020H00527" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267436" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687220879" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00020H00527" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00021A00529" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:21 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"171 KB" }, { "Name":"OriginalFileName", "Value":"GroupE-SignAttestation-00005754.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00021A00529" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267537" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687221222" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00021A00529" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00021D00531" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:21 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"171 KB" }, { "Name":"OriginalFileName", "Value":"GroupE-SignAttestation-00005754.pdf.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00021D00531" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267606" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687221553" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00021D00531" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00021H00533" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:21 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"166 KB" }, { "Name":"OriginalFileName", "Value":"MedicalLossRatioReporting_EnrollmentAttestation-00005754.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00021H00533" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267633" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687221854" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00021H00533" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00022A00535" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:22 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"166 KB" }, { "Name":"OriginalFileName", "Value":"MedicalLossRatioReporting_amp;EnrollmentAttestation-00005754.pdf.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00022A00535" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267663" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687222204" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00022A00535" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00022D00537" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:22 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"191 KB" }, { "Name":"OriginalFileName", "Value":"currentUIA1028-TestTD-0033-8003K0000005OKNQA2-05052020-D-1440.png" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00022D00537" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267691" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687222535" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00022D00537" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] } ] } } }';
            Test.setMock(HttpCalloutMock.class, new GA_AP_CalloutMockResp(jsonresponse));
            GA_AP_SearchDocSTAR.searchAccountDocument(acc.id, 'Account',system.now(),system.now());
            string RetvDocRespBody='--MIMEBoundaryurn_uuid_5A38F1FAE2CDC6688F1518012343279'
                +'Content-Type: application/json'
                +'Content-Transfer-Encoding: binary'
                +'Content-ID: <0.urn:uuid:5A38F1FAE2CDC6688F1518012343280@apache.org>'
                
                +'{ "RetrieveDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2018-02-07T09:05:37.406-05:00", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Attribute":[ { "Name":"MimeType", "Value":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" }, { "Name":"FileName", "Value":"/home/mpcmi/cm/1/A1001001A17L19B55302A11293.xlsx" }, { "Name":"Customer_ID", "Value":"100070" }, { "Name":"Federal_Tax_ID", "Value":"382069753" }, { "Name":"WorkOrder", "Value":"1774418" }, { "Name":"FileRecordID", "Value":"0X000000000000E3A5" }, { "Name":"Scan_Date_Time", "Value":"1513716782039" }, { "Name":"CREATETS", "Value":"1517497436095" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B01B00356A10849" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B01B00356A10849" }, { "Name":"LASTCHANGEDUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1517497436095" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] } } }'
                +'--MIMEBoundaryurn_uuid_5A38F1FAE2CDC6688F1518012343279'
                +'Content-Type: */*'
                +'Content-Transfer-Encoding: binary'
                +'Content-ID: <attachment=urn:uuid:5A38F1FAE2CDC6688F1518012343278>'
                
                +'%PDF-1.5'
                +'%ÈÈÈÈÈÈÈ'
                +'%%EOF'
                
                +'--MIMEBoundaryurn_uuid_7110B31FA3DF8794C61518605185718--';
            
            
            Test.setMock(HttpCalloutMock.class, new GA_AP_CalloutMockResp(RetvDocRespBody));   
            GA_AP_SearchDocSTAR.fetchAccountDocument('Test', 'Test',acc.Id, 'SFGRPCRM_CM_GroupCRM');
            test.stopTest();
            system.assert(acc !=null);
        } 
    }
    
    /*******************************************************************************************************************************
@Description        :   getdocFromdocstrDiffFieldValue() method 
@Name               :   getdocFromdocstrDiffFieldValue
@Param              :   None
@Return             :   void
@throws Exception   :   N/A;
********************************************************************************************************************************/ 
    private static testmethod void getdocFromdocstrDiffFieldValue()
    {
        string accRecType = 'Account - Prospect';
        Id accRecTpeId = Schema.SObjectType.Account.getRecordTypeInfosByName().get(accRecType).getRecordTypeId();
        user usr = GA_OBJ_TD01_TestDataCreation.UsrRec('TestJeoRl','testsalesrepmail@bcbsm.com','System Administrator');
        database.insert(usr);
        
        system.runAs(usr)
        {   
            
            Account acc = GA_OBJ_TD01_TestDataCreation.AccRec();
            acc.CID__c='419008';
            acc.recordtypeid=accRecTpeId;
            database.insert(acc);
            
            test.startTest();
            //String jsonresponse  = '{ "SearchDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2019-02-21T12:41:27.773-05:00", "MessageID":"DMGMTJSON1.0-32077f6f-0d81-4f71-8c8c-882aed4fabf1", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful Completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Document":[ { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550F03652" }, { "Name":"file_record_id", "Value":"0X01000000000001E9" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001E9" }, { "Name":"Scan_Date_Time", "Value":"1518551750542" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001e9_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518551750603" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550F03652" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550F03652" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403590" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550G03654" }, { "Name":"file_record_id", "Value":"0X01000000000001EA" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EA" }, { "Name":"Scan_Date_Time", "Value":"1518551750637" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001ea_01-09-2018__workorderactivity.xlsx" }, { "Name":"CREATETS", "Value":"1518551750698" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550G03654" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550G03654" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403701" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550H03656" }, { "Name":"file_record_id", "Value":"0X01000000000001EB" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EB" }, { "Name":"Scan_Date_Time", "Value":"1518551750735" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001eb_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518551750795" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550H03656" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550H03656" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403803" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548C50690" }, { "Name":"file_record_id", "Value":"0X01000000000001E9" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001E9" }, { "Name":"Scan_Date_Time", "Value":"1518102947973" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001e9_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518102948313" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548C50690" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548C50690" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316447" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548D50692" }, { "Name":"file_record_id", "Value":"0X01000000000001EA" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EA" }, { "Name":"Scan_Date_Time", "Value":"1518102948150" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001ea_01-09-2018__workorderactivity.xlsx" }, { "Name":"CREATETS", "Value":"1518102948473" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548D50692" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548D50692" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316506" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548F50694" }, { "Name":"file_record_id", "Value":"0X01000000000001EB" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EB" }, { "Name":"Scan_Date_Time", "Value":"1518102948281" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001eb_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518102948594" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548F50694" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548F50694" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316564" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] } ] } } }'; 
            String jsonresponse = '{ "SearchDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2020-05-30T15:11:31.991-04:00", "MessageID":"DMGMTJSON1.0-e3faca8f-0ce3-4967-a0bd-7b00776bb776", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful Completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Document":[ { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00019H00516" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Mbr Apps" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:19 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"210 KB" }, { "Name":"OriginalFileName", "Value":"Ecos-TestTD-0033-8003K0000005OKNQA2-05052020-D-1411.docx" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00019H00516" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593292398" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687219934" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00019H00516" }, { "Name":"ACLCODE", "Value":"Mbr_Apps_ACL" }, { "Name":"ItemType", "Value":"Mbr_Apps" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00020E00525" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:20 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"346 KB" }, { "Name":"OriginalFileName", "Value":"CoverageAgreement-00005754.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00020E00525" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267405" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687220556" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00020E00525" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00020H00527" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:20 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"346 KB" }, { "Name":"OriginalFileName", "Value":"CoverageAgreement-00005754.pdf.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00020H00527" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267436" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687220879" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00020H00527" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00021A00529" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:21 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"171 KB" }, { "Name":"OriginalFileName", "Value":"GroupE-SignAttestation-00005754.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00021A00529" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267537" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687221222" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00021A00529" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00021D00531" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:21 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"171 KB" }, { "Name":"OriginalFileName", "Value":"GroupE-SignAttestation-00005754.pdf.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00021D00531" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267606" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687221553" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00021D00531" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00021H00533" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:21 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"166 KB" }, { "Name":"OriginalFileName", "Value":"MedicalLossRatioReporting_EnrollmentAttestation-00005754.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00021H00533" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267633" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687221854" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00021H00533" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00022A00535" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:22 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"166 KB" }, { "Name":"OriginalFileName", "Value":"MedicalLossRatioReporting_amp;EnrollmentAttestation-00005754.pdf.pdf" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00022A00535" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267663" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687222204" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00022A00535" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] }, { "Attribute":[ { "Name":"fed_tax_id", "Value":"234565433" }, { "Name":"item_id", "Value":"A1001001A20E05B00022D00537" }, { "Name":"submission_date", "Value":"1588636800000" }, { "Name":"Federal_Tax_ID", "Value":"234565433" }, { "Name":"Submission_Date", "Value":"1588636800000" }, { "Name":"Ownership", "Value":"Exempt" }, { "Name":"Managing_Agent", "Value":"01" }, { "Name":"Document_Type", "Value":"Other" }, { "Name":"CM_Entry_Date", "Value":"1588636800000" }, { "Name":"CM_Entry_Time", "Value":"10:00:22 AM" }, { "Name":"Image_Ref", "Value":"00" }, { "Name":"Customer_ID", "Value":"602719" }, { "Name":"OriginalFileSize", "Value":"191 KB" }, { "Name":"OriginalFileName", "Value":"currentUIA1028-TestTD-0033-8003K0000005OKNQA2-05052020-D-1440.png" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"COMPONENTID", "Value":"A20E05B00022D00537" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1590593267691" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"CREATETS", "Value":"1588687222535" }, { "Name":"ITEMID", "Value":"A1001001A20E05B00022D00537" }, { "Name":"ACLCODE", "Value":"Other_ACL" }, { "Name":"ItemType", "Value":"Other" } ] } ] } } }'; 
            Test.setMock(HttpCalloutMock.class, new GA_AP_CalloutMockResp(jsonresponse));
            GA_AP_SearchDocSTAR.searchAccountDocument(acc.id, 'Account',system.now(),system.now());
            string RetvDocRespBody='--MIMEBoundaryurn_uuid_5A38F1FAE2CDC6688F1518012343279'
                +'Content-Type: application/json'
                +'Content-Transfer-Encoding: binary'
                +'Content-ID: <0.urn:uuid:5A38F1FAE2CDC6688F1518012343280@apache.org>'
                +'{ "RetrieveDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2018-02-07T09:05:37.406-05:00", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Attribute":[ { "Name":"MimeType", "Value":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" }, { "Name":"FileName", "Value":"/home/mpcmi/cm/1/A1001001A17L19B55302A11293.xlsx" }, { "Name":"Customer_ID", "Value":"100070" }, { "Name":"Federal_Tax_ID", "Value":"382069753" }, { "Name":"WorkOrder", "Value":"1774418" }, { "Name":"FileRecordID", "Value":"0X000000000000E3A5" }, { "Name":"Scan_Date_Time", "Value":"1513716782039" }, { "Name":"CREATETS", "Value":"1517497436095" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B01B00356A10849" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B01B00356A10849" }, { "Name":"LASTCHANGEDUSERID", "Value":"MPCMI" }, { "Name":"LASTCHANGEDTS", "Value":"1517497436095" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] } } }'
                +'--MIMEBoundaryurn_uuid_5A38F1FAE2CDC6688F1518012343279'
                +'Content-Type: */*'
                +'Content-Transfer-Encoding: binary'
                +'Content-ID: <attachment=urn:uuid:5A38F1FAE2CDC6688F1518012343278>'
                
                +'%PDF-1.5'
                +'%ÈÈÈÈÈÈÈ'
                +'%%EOF'
                
                +'--MIMEBoundaryurn_uuid_7110B31FA3DF8794C61518605185718--';
            Test.setMock(HttpCalloutMock.class, new GA_AP_CalloutMockResp(RetvDocRespBody));   
            GA_AP_SearchDocSTAR.fetchAccountDocument('Test','Test',acc.Id,'SFGRPCRM_CM_GroupCRM'); 
            test.stopTest();
            system.assert(acc !=null);
        } 
    }
    
        
/*******************************************************************************************************************************
@Description        :   getdocNotFound() method 
@Name               :   getdocNotFound
@Param              :   None
@Return             :   void
@throws Exception   :   N/A;
********************************************************************************************************************************/ 
     private static testmethod void getdocNotFound()
    {
        string accRecType = 'Account - Prospect';
        Id accRecTpeId = Schema.SObjectType.Account.getRecordTypeInfosByName().get(accRecType).getRecordTypeId();
        user usr = GA_OBJ_TD01_TestDataCreation.UsrRec('TestJeoRl','testsalesrepmail@bcbsm.com','System Administrator');
        database.insert(usr);
        
        system.runAs(usr)
        {   
            
            Account acc = GA_OBJ_TD01_TestDataCreation.AccRec();
            acc.CID__c='419009';
            acc.recordtypeid=accRecTpeId;
            database.insert(acc);
            
            test.startTest();
            //String jsonresponse  = '{ "SearchDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2019-02-21T12:41:27.773-05:00", "MessageID":"DMGMTJSON1.0-32077f6f-0d81-4f71-8c8c-882aed4fabf1", "Status":"SUCCESSFUL", "SystemMessage":[ { "Code":"S0000", "Description":"Successful Completion.", "Source":"ICI" } ] }, "PayloadArea":{ "Document":[ { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550F03652" }, { "Name":"file_record_id", "Value":"0X01000000000001E9" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001E9" }, { "Name":"Scan_Date_Time", "Value":"1518551750542" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001e9_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518551750603" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550F03652" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550F03652" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403590" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550G03654" }, { "Name":"file_record_id", "Value":"0X01000000000001EA" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EA" }, { "Name":"Scan_Date_Time", "Value":"1518551750637" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001ea_01-09-2018__workorderactivity.xlsx" }, { "Name":"CREATETS", "Value":"1518551750698" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550G03654" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550G03654" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403701" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B13B45550H03656" }, { "Name":"file_record_id", "Value":"0X01000000000001EB" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EB" }, { "Name":"Scan_Date_Time", "Value":"1518551750735" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001eb_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518551750795" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B13B45550H03656" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B13B45550H03656" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516403803" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548C50690" }, { "Name":"file_record_id", "Value":"0X01000000000001E9" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001E9" }, { "Name":"Scan_Date_Time", "Value":"1518102947973" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001e9_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518102948313" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548C50690" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548C50690" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316447" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548D50692" }, { "Name":"file_record_id", "Value":"0X01000000000001EA" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EA" }, { "Name":"Scan_Date_Time", "Value":"1518102948150" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001ea_01-09-2018__workorderactivity.xlsx" }, { "Name":"CREATETS", "Value":"1518102948473" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548D50692" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548D50692" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316506" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] }, { "Attribute":[ { "Name":"item_id", "Value":"A1001001A18B08B01548F50694" }, { "Name":"file_record_id", "Value":"0X01000000000001EB" }, { "Name":"eff_date", "Value":"1515456000000" }, { "Name":"cid", "Value":"419008" }, { "Name":"Customer_ID", "Value":"419008" }, { "Name":"Federal_Tax_ID", "Value":"202350227" }, { "Name":"FileRecordID", "Value":"0X01000000000001EB" }, { "Name":"Scan_Date_Time", "Value":"1518102948281" }, { "Name":"EffDate", "Value":"1515456000000" }, { "Name":"FILE_TYPE", "Value":"WORKORDERACTIVITY" }, { "Name":"OriginalFileName", "Value":"419008_202350227__0x01000000000001eb_01-09-2018__workorderactivity.docx" }, { "Name":"CREATETS", "Value":"1518102948594" }, { "Name":"CREATEUSERID", "Value":"MPCMI" }, { "Name":"ITEMID", "Value":"A1001001A18B08B01548F50694" }, { "Name":"VERSIONID", "Value":"1" }, { "Name":"COMPONENTID", "Value":"A18B08B01548F50694" }, { "Name":"LASTCHANGEDUSERID", "Value":"CMATTRSETTER" }, { "Name":"LASTCHANGEDTS", "Value":"1541516316564" }, { "Name":"ACLCODE", "Value":"GroupCRM_ACL" }, { "Name":"ItemType", "Value":"GroupCRM" } ] } ] } } }'; 
            String jsonresponse = '{ "SearchDocumentResponse":{ "RespHeaderArea":{ "VersionInfo":{ "ServiceVersion":"1.0", "SchemaVersion":"1.0.0" }, "CreationDateTime":"2020-05-30T20:14:53.879-04:00", "MessageID":"DMGMTJSON1.0-316e17ad-0057-4454-b565-89eb8c2e9744", "Status":"UNSUCCESSFUL", "SystemMessage":[ { "Code":"S0006", "Description":"No data found.", "Source":"ICI" } ] } } }';
            Test.setMock(HttpCalloutMock.class, new GA_AP_CalloutMockResp(jsonresponse));
            GA_AP_SearchDocSTAR.searchAccountDocument(acc.id, 'Account',system.now(),system.now());             
            test.stopTest();
            system.assert(acc !=null);
        } 
    }
}